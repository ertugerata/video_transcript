# YouTube & Ses Dosyası Özetleyici (Video Transcript & Summarizer)

Bu proje, YouTube videolarından ve yüklenen ses dosyalarından transkript çıkaran, Google Gemini API kullanarak özetleyen ve tüm verileri **Supabase** bulut veritabanında saklayan gelişmiş bir Flask web uygulamasıdır. Ayrıca medya formatı dönüştürme araçları da sunar.

## Özellikler

*   **YouTube Desteği:** Video linki (standart, short veya embed) üzerinden transkript çekme (Türkçe, İngilizce veya Otomatik).
*   **Yerel Ses Dosyası Desteği:** Bilgisayarınızdan ses dosyası yükleyerek **yerel Whisper modelleri** ile transkript oluşturma.
    *   Seçilebilir Whisper model boyutları (tiny, base, small, medium, large).
*   **Yapay Zeka Özeti:** Google Gemini (Pro/Flash) modelleri ile içeriklerin otomatik özetini çıkarma.
*   **Medya Dönüştürücü:** Ses ve video dosyalarını farklı formatlara (örn. mp3) dönüştürme aracı.
*   **Veritabanı Kaydı:** Tüm aramalar ve çeviriler **Supabase** veritabanında saklanır. Aynı video tekrar sorgulandığında veriler veritabanından getirilir (Önbellekleme).
*   **Dışa Aktarma:** Transkriptleri ve özetleri `.txt` veya `.md` (Markdown) formatında indirme imkanı.

## Gereksinimler

*   **Python 3.8+**
*   **FFmpeg:** Ses işleme ve format dönüştürme işlemleri için sisteminizde kurulu olmalıdır.
    *   *Ubuntu/Debian:* `sudo apt install ffmpeg`
    *   *macOS:* `brew install ffmpeg`
    *   *Windows:* [FFmpeg indir](https://ffmpeg.org/download.html) ve PATH'e ekle.
*   **Supabase Hesabı:** Veritabanı hizmeti için.
*   **Google Gemini API Anahtarı:** Özetleme özelliği için.

## Kurulum

1.  **Depoyu klonlayın:**
    ```bash
    git clone <repo-url>
    cd <repo-folder>
    ```

2.  **Gerekli Python paketlerini yükleyin:**
    ```bash
    pip install -r requirements.txt
    ```

3.  **Çevresel değişkenleri ayarlayın:**
    Proje ana dizininde `.env` dosyası oluşturun ve aşağıdaki anahtarları ekleyin:
    ```env
    GEMINI_API_KEY=sizin_gemini_api_anahtariniz
    SUPABASE_URL=https://sizin-proje-id.supabase.co
    SUPABASE_KEY=sizin_supabase_anon_key
    ```

4.  **Supabase Veritabanı Kurulumu:**

    Supabase panelinizde "SQL Editor" kısmına giderek aşağıdaki sorguyu çalıştırın ve `transcripts` tablosunu oluşturun:

    ```sql
    create table transcripts (
      id bigint generated by default as identity primary key,
      video_id text,
      url text,
      full_transcript text,
      simple_transcript text,
      language text,
      summary text,
      created timestamptz default now()
    );
    ```
    *(İsteğe bağlı)* Storage bucket kullanacaksanız bucket ayarlarını da yapmanız gerekebilir, ancak şu an temel metin saklama özelliği aktiftir.

## Kullanım

Uygulamayı başlatmak için:

```bash
python app.py
```

Tarayıcınızda **`http://localhost:5000`** adresine gidin.

### 1. YouTube Transkripti & Özeti
*   YouTube URL'sini ilgili kutuya yapıştırın.
*   "Transkript Getir" butonuna basın.
*   "Özet Oluştur" seçeneği işaretliyse, transkript çekildikten sonra Gemini ile özet oluşturulur.

### 2. Ses Dosyası Yükleme (Whisper)
*   "Dosya Yükle" sekmesine geçin.
*   Bir ses dosyası seçin.
*   Kullanılacak **Whisper Model Boyutunu** seçin. (İlk kullanımda model indirilir).
*   İşlem tamamlandığında metin ve özet ekranda görünür.

### 3. Medya Dönüştürücü
*   Dosyalarınızı farklı formatlara dönüştürmek için ilgili menüyü kullanın.

## Proje Yapısı

*   `app.py`: Flask web sunucusu ve uygulama mantığı.
*   `mcp-media-server/src/`: Medya işleme, indirme ve veritabanı işlemlerini yürüten modüller.
    *   `transcribe.py`: Whisper ile transkripsiyon.
    *   `audio.py`: Ses işleme ve dönüştürme.
    *   `server.py`: FastMCP sunucusu ve iş akışları.
    *   `db.py`: Supabase veritabanı işlemleri.
*   `requirements.txt`: Proje bağımlılıkları.
*   `templates/`: HTML arayüz dosyaları.
